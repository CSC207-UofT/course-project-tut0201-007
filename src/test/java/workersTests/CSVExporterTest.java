package workersTests;

import static org.junit.Assert.*;

import controllers.Controller;
import entities.Course;
import entities.Schedule;
import java.io.IOException;
import java.util.ArrayList;
import org.junit.Before;
import org.junit.Test;
import workers.CSVExporter;
import workers.Scheduler;

public class CSVExporterTest {

    String dummyCSV;
    Scheduler sr;
    Schedule s;
    ArrayList<String> courseCodes;
    ArrayList<Course> courses;
    CSVExporter c;

    @Before
    public void setUp() throws Exception {
        dummyCSV =
                "Subject,Start Date,Start Time,End Date,End Time,Location\n"
                        + "TST102 TUT-0101 Y,2021-09-14,10:00,2021-09-14,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-09-21,10:00,2021-09-21,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-09-28,10:00,2021-09-28,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-10-05,10:00,2021-10-05,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-10-12,10:00,2021-10-12,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-10-19,10:00,2021-10-19,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-10-26,10:00,2021-10-26,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-11-02,10:00,2021-11-02,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-11-09,10:00,2021-11-09,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-11-16,10:00,2021-11-16,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-11-23,10:00,2021-11-23,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-11-30,10:00,2021-11-30,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-12-07,10:00,2021-12-07,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-12-14,10:00,2021-12-14,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-12-21,10:00,2021-12-21,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2021-12-28,10:00,2021-12-28,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-01-04,10:00,2022-01-04,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-01-11,10:00,2022-01-11,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-01-18,10:00,2022-01-18,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-01-25,10:00,2022-01-25,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-02-01,10:00,2022-02-01,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-02-08,10:00,2022-02-08,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-02-15,10:00,2022-02-15,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-02-22,10:00,2022-02-22,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-03-01,10:00,2022-03-01,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-03-08,10:00,2022-03-08,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-03-15,10:00,2022-03-15,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-03-22,10:00,2022-03-22,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-03-29,10:00,2022-03-29,11:00,ROOM 05\n"
                        + "TST102 TUT-0101 Y,2022-04-05,10:00,2022-04-05,11:00,ROOM 05\n"
                        + "TST103 TUT-0101 Y,2021-09-14,10:00,2021-09-14,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-09-21,10:00,2021-09-21,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-09-28,10:00,2021-09-28,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-10-05,10:00,2021-10-05,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-10-12,10:00,2021-10-12,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-10-19,10:00,2021-10-19,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-10-26,10:00,2021-10-26,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-11-02,10:00,2021-11-02,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-11-09,10:00,2021-11-09,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-11-16,10:00,2021-11-16,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-11-23,10:00,2021-11-23,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-11-30,10:00,2021-11-30,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-12-07,10:00,2021-12-07,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-12-14,10:00,2021-12-14,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-12-21,10:00,2021-12-21,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2021-12-28,10:00,2021-12-28,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-01-04,10:00,2022-01-04,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-01-11,10:00,2022-01-11,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-01-18,10:00,2022-01-18,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-01-25,10:00,2022-01-25,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-02-01,10:00,2022-02-01,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-02-08,10:00,2022-02-08,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-02-15,10:00,2022-02-15,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-02-22,10:00,2022-02-22,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-03-01,10:00,2022-03-01,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-03-08,10:00,2022-03-08,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-03-15,10:00,2022-03-15,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-03-22,10:00,2022-03-22,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-03-29,10:00,2022-03-29,11:00,ONLINE\n"
                        + "TST103 TUT-0101 Y,2022-04-05,10:00,2022-04-05,11:00,ONLINE\n"
                        + "TST102 LEC-0101 Y,2021-09-13,12:00,2021-09-13,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-09-20,12:00,2021-09-20,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-09-27,12:00,2021-09-27,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-04,12:00,2021-10-04,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-11,12:00,2021-10-11,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-18,12:00,2021-10-18,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-25,12:00,2021-10-25,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-01,12:00,2021-11-01,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-08,12:00,2021-11-08,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-15,12:00,2021-11-15,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-22,12:00,2021-11-22,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-29,12:00,2021-11-29,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-06,12:00,2021-12-06,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-13,12:00,2021-12-13,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-20,12:00,2021-12-20,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-27,12:00,2021-12-27,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-03,12:00,2022-01-03,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-10,12:00,2022-01-10,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-17,12:00,2022-01-17,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-24,12:00,2022-01-24,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-31,12:00,2022-01-31,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-07,12:00,2022-02-07,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-14,12:00,2022-02-14,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-21,12:00,2022-02-21,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-28,12:00,2022-02-28,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-07,12:00,2022-03-07,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-14,12:00,2022-03-14,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-21,12:00,2022-03-21,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-28,12:00,2022-03-28,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-04-04,12:00,2022-04-04,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-09-14,12:00,2021-09-14,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-09-21,12:00,2021-09-21,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-09-28,12:00,2021-09-28,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-05,12:00,2021-10-05,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-12,12:00,2021-10-12,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-19,12:00,2021-10-19,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-26,12:00,2021-10-26,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-02,12:00,2021-11-02,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-09,12:00,2021-11-09,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-16,12:00,2021-11-16,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-23,12:00,2021-11-23,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-30,12:00,2021-11-30,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-07,12:00,2021-12-07,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-14,12:00,2021-12-14,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-21,12:00,2021-12-21,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-28,12:00,2021-12-28,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-04,12:00,2022-01-04,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-11,12:00,2022-01-11,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-18,12:00,2022-01-18,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-25,12:00,2022-01-25,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-01,12:00,2022-02-01,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-08,12:00,2022-02-08,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-15,12:00,2022-02-15,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-22,12:00,2022-02-22,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-01,12:00,2022-03-01,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-08,12:00,2022-03-08,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-15,12:00,2022-03-15,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-22,12:00,2022-03-22,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-29,12:00,2022-03-29,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-04-05,12:00,2022-04-05,13:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-09-10,13:00,2021-09-10,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-09-17,13:00,2021-09-17,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-09-24,13:00,2021-09-24,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-01,13:00,2021-10-01,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-08,13:00,2021-10-08,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-15,13:00,2021-10-15,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-22,13:00,2021-10-22,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-10-29,13:00,2021-10-29,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-05,13:00,2021-11-05,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-12,13:00,2021-11-12,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-19,13:00,2021-11-19,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-11-26,13:00,2021-11-26,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-03,13:00,2021-12-03,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-10,13:00,2021-12-10,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-17,13:00,2021-12-17,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-24,13:00,2021-12-24,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2021-12-31,13:00,2021-12-31,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-07,13:00,2022-01-07,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-14,13:00,2022-01-14,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-21,13:00,2022-01-21,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-01-28,13:00,2022-01-28,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-04,13:00,2022-02-04,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-11,13:00,2022-02-11,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-18,13:00,2022-02-18,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-02-25,13:00,2022-02-25,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-04,13:00,2022-03-04,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-11,13:00,2022-03-11,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-18,13:00,2022-03-18,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-03-25,13:00,2022-03-25,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-04-01,13:00,2022-04-01,14:00,NF 003\n"
                        + "TST102 LEC-0101 Y,2022-04-08,13:00,2022-04-08,14:00,NF 003\n"
                        + "TST103 LEC-0101 Y,2021-09-09,12:00,2021-09-09,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-09-16,12:00,2021-09-16,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-09-23,12:00,2021-09-23,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-09-30,12:00,2021-09-30,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-10-07,12:00,2021-10-07,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-10-14,12:00,2021-10-14,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-10-21,12:00,2021-10-21,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-10-28,12:00,2021-10-28,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-11-04,12:00,2021-11-04,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-11-11,12:00,2021-11-11,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-11-18,12:00,2021-11-18,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-11-25,12:00,2021-11-25,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-12-02,12:00,2021-12-02,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-12-09,12:00,2021-12-09,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-12-16,12:00,2021-12-16,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-12-23,12:00,2021-12-23,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2021-12-30,12:00,2021-12-30,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-01-06,12:00,2022-01-06,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-01-13,12:00,2022-01-13,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-01-20,12:00,2022-01-20,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-01-27,12:00,2022-01-27,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-02-03,12:00,2022-02-03,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-02-10,12:00,2022-02-10,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-02-17,12:00,2022-02-17,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-02-24,12:00,2022-02-24,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-03-03,12:00,2022-03-03,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-03-10,12:00,2022-03-10,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-03-17,12:00,2022-03-17,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-03-24,12:00,2022-03-24,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-03-31,12:00,2022-03-31,15:00,ONLINE\n"
                        + "TST103 LEC-0101 Y,2022-04-07,12:00,2022-04-07,15:00,ONLINE\n";
    }

    @Test(timeout = 1000)
    public void testExport() {
        sr = new Scheduler();
        courseCodes = new ArrayList<>();
        courseCodes.add("TST102Y");
        courseCodes.add("TST103Y");
        courses = (ArrayList<Course>) Controller.courseInstantiator(courseCodes);
        s = sr.createBasicSchedule(courses);
        c = new CSVExporter();
        c.outputSchedule(s);

        String expected = dummyCSV;
        try {
            assertEquals(expected, c.toString(0));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
